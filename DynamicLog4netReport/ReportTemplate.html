<!DOCTYPE html>
<html>
<head>
	<title>Html Template</title>
	<meta charset="UTF-8">

	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.6.1/prop-types.js"></script>

	<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
	<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/react-transition-group/2.3.1/react-transition-group.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/reactstrap/6.0.1/reactstrap.js"></script>-->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/react-redux/5.0.7/react-redux.min.js"></script>

	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.6.2/react.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/15.6.2/react-dom.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js"></script>-->

	<script type="text/babel">
		const levelToColor = {
			debug: 'gray',
			pass: 'limegreen',
			info: 'lightskyblue',
			failskip: 'gold',
			warn: 'coral',
			retry: 'greenyellow',
			fail: 'red',
		};
	</script>

	<style>
	*
	{
		font-family: Helvetica, Arial, sans-serif;
	}

	label
	{
		color: DimGray;
	}

	a:link
	{
		color: DimGray;
		background-color: transparent;
		text-decoration: none;
	}

	a:visited
	{
		color: DimGray;
	}

	.crossedOut {
		text-decoration: line-through !important;
	}

	/* Styles for statuses (Fail, Pass, Info etc). */
	tr.retry > td.summaryStatus > span, tr.fail > td.summaryStatus > span, tr.pass > td.summaryStatus > span, tr.info > td.summaryStatus > span, tr.warn > td.summaryStatus > span, tr.failskip > td.summaryStatus > span, tr.debug > td.summaryStatus > span,
	tr.retry > td.statusCol > span,     tr.fail > td.statusCol > span,     tr.pass > td.statusCol > span,     tr.info > td.statusCol > span,     tr.warn > td.statusCol > span,     tr.failskip > td.statusCol > span,     tr.debug > td.statusCol > span
	{
		color: White;
		float: left;
		width: 65px;
		padding: 2px 5px;
		margin: 2px;
		-moz-border-radius: 5px;
		border-radius: 5px;
	}

	.statusDebug, .statusdebug { color: gray !important; }
	.statusPass, .statuspass { color: limegreen !important; }
	.statusInfo, .statusinfo { color: lightskyblue !important; }
	.statusFailSkip, .statusfailskip { color: gold !important; }
	.statusWarn, .statuswarn { color: coral !important; }
	.statusRetry, .statusretry { color: GreenYellow !important; }
	.statusFail, .statusfail { color: red !important; }

	tr.debug > td.summaryStatus > span, tr.debug > td.statusCol > span
	{
		background-color: gray;
		text-align: center;
	}

	tr.pass > td.summaryStatus > span, tr.pass > td.statusCol > span
	{
		background-color: limegreen;
		text-align: center;
	}

	tr.retry > td.summaryStatus > span, tr.retry > td.statusCol > span
	{
		background-color: GreenYellow;
		text-align: center;
	}

	tr.fail > td.summaryStatus > span, tr.fail > td.statusCol > span
	{
		background-color: red;
		text-align: center;
	}

	tr.failskip > td.summaryStatus > span, tr.failskip > td.statusCol > span
	{
		background-color: gold;
		text-align: center;
	}

	tr.info > td.summaryStatus > span, tr.info > td.statusCol > span
	{
		background-color: lightskyblue;
		text-align: center;
	}

	tr.warn > td.summaryStatus > span, tr.warn > td.statusCol > span
	{
		background-color: coral;
		text-align: center;
	}

	table.summary
	{
		border-collapse: separate;
		border-spacing: 0px 3px;
		font-size: 12pt;
		width: 100%;
		margin-top: 10px;
	}

	tr.summaryRow
	{
		background-color: #efeeee;
		cursor: pointer;
		padding-top: 10px;
		border-collapse: collapse;
	}
	tr.summaryRow td:first-child { border-top-left-radius:  8px; border-bottom-left-radius:  8px;   border-left: 1px solid gray; }
	tr.summaryRow td:last-child  { border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-right: 1px solid gray;}

		tr.summaryRow > td
		{
			border-top: 1px solid gray;
			border-bottom: 1px solid gray;
			padding: 3px;
			white-space: nowrap;
		}

	.summaryDetailsRow > td
	{
		padding: 0;
	}

	.summaryDetailsRow > td:last-child {
		padding-right: 5px;
	}

	.square
	{
		border: 1px solid limegreen;
		float: left;
		width: 6px;
		height: 6px;
		background-color: limegreen;
		margin: 2px;
		-moz-border-radius: 6px;
		border-radius: 6px;
	}

	.debug .square {
		background-color: gray !important;
		border-color: gray !important;
	}

	.pass .square {
		background-color: limegreen !important;
		border-color: limegreen !important;
	}

	.retry .square {
		background-color: GreenYellow !important;
		border-color: GreenYellow !important;
	}

	.fail .square {
		background-color: red !important;
		border-color: red !important;
	}

	.failskip .square {
		background-color: gold !important;
		border-color: gold !important;
	}

	.info .square {
		background-color: lightskyblue !important;
		border-color: lightskyblue !important;
	}

	.warn .square {
		background-color: coral !important;
		border-color: coral !important;
	}


	table.details
	{
		border-collapse: collapse;
		font-size: 12pt;
		margin-bottom: 20px;
		width: 100%;
	}

		table.details > tbody > tr > td
		{
			border: 1px solid gray;
			padding: 3px;
		}

	tr.detailsHeaderRow
	{
		font-weight: bold;
	}

		tr.detailsHeaderRow > td
		{
			border-top: none !important;
		}

	tr.header > td
	{
		font-family: Helvetica, Arial, sans-serif;
		border-top: none !important;
	}

	td.summaryStatus
	{
		font-weight: bold;
		width: 80px;
	}

	td.summaryTestName
	{
		font-weight: normal;
	}

	td.summaryStart
	{
		width: 70px;
	}

	td.summaryEnd
	{
		width: 70px;
	}

	td.summaryDuration
	{
		width: 140px;
	}

	td.timeCol
	{
		width: 70px;
	}

	td.statusCol
	{
		width: 80px;
	}

	tr.detailsExceptionRow > td > div, .detailsException
	{
		font-family: monospace;
		white-space: pre-wrap;
		max-height: 20em;
		overflow: scroll;
	}

	a.screenshot {
		float: left; margin-right: 5px;
	}

	.pageNavigation {
		color: RGB(0,154,250)
	}

	.exceptionCol {
		font-size: 85%;
	}

	span.screenshotIcon::before {
		content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAASiSURBVHja7FVrTFNnGH6Qci8wgVkZFCql1FIEcZLJRAaMbQzGVSQmm9zqXDbHAJclWzIQyGLCzKTqEmFjYTMaJ8yAIXFIELIlKlCgBbmIxVHYqlAL5SL00Avdd/CwuWQX+MG/fSdPzu19n/f93ttnZbFYsJFrEzZ4bbgBq3VrSPChl49LkfrO3GfQog3bsB/LsIYBaozgKmR4SKSMBJb1GZAgV8B3LxEHcLmZIfkorCvUWxzIZQtQZhP0RiMW1caFZaXlJBpxjmhME5is1kIcJOCUhAp53KTALHg7B6BmUApba0fsF+TAkeUMMykULzYXx24X4kpbPdCCIrKTGqI9wfoX4hh/763ScLFgR0ZoJjyd+Wi8fx49mtvIFH0AxUMFck/l6sblk4+snrHY8WP5vl+lVqNbK4dKq/qIGOgmLAusvyMO4vFKd4v8IhLESdjjlYAG5Tn0adsR73cIfYRYUpGrG77y2yBG0U80xulwDOtG4qUcaSLPmQcVR+VCvgUTKFl/8djLu/S153dHvC5ORKDHC+hQ/4gq+ceI88vC7OISJMTj/h/GVolHCIYIRgnmyFuvXKVI5Al5wBPWZwkcnzwexpmMfbF5aWFxiPbNQM9EK+qGpIjyPQCOoz/K6sqo5u+6htG7su1hgoEVA2GgbPdaHzFMmgehxyLsANW8iqR2hdWabgMWIS/Lik3IixHvgbsNH5eHTiHCOxnhnh4orS2mWi92D1Myk4LxlCYeJFDbHbU+wPa2K47c8RL3ZrtM88isdZphz6CAX4CS5hKKyJgJllkCz235STvjME/No77/It4Ky0bNz9+Yvq68rKLajXLi110iSIeEvqsdjtqkufk6FEUHR3EPBR6BfFKBpi0tW7KDs5Hkm4yc6hwjrqOdyE6uJDlye7jLklmPWlk9JPsy0TZWi7OnL6hwEzeIQBcB7f0Y+327KA7PqVHE9/c5KDoMzcIU8n56B0J3MariqtE60IbUqlQdIe8gHUDr0eHUspYtZiyZF8kOHsPHVYi28VrY27OMFEy0x7fwJnz4QW4VwUJhxNuhx0AZTShr/wQCDzGkkZXoGu1BwReFuunm6dXk0zmSMQUwz1LPjsPLORE+ns641teE5IB3oZJoRP0hGom1q9V7okCuIEOcCzuWE87KP4eBOFS09wTuTdxHpjSL0jZMyxniewwpfafHxQI9Llhdw70yTrpPmK/Hc2jouQQBR4TyVy+gf1dnkD2LDVcbDqoHKvCAGkf+zhLo9UZ8ev44NdSgpKtKwZRrH+P5BMFjJsHMsIvHwaS0qEvlKSdR2VuE3vG7xFs2uGQkzG3SQGfQIWO7BG62W1Fce9w0cFWpJAGgY/wLU1V0KH+lw/E08dPT1BXp+DYj5eWU8je+xJ2pTig07ZgxzJBSjcVmW0+cbpKarn3fojJ3LCtIvSuZqhpkiGexWvn/MK7phvDGKzjhHuKYHhMcbfuiXwTmDHNoGWjFreuyB+Yby52EeDXGNFTMtDSu9TwgPQguwS4C0cqu/vynZwj7mWajiQ2r8349B44NwWYCN8bg6j8jE4YpAmqtxH8Y+P/Q/6/1uwADACSA3UJOwYxSAAAAAElFTkSuQmCC);
	}

	#headerLeft {
		margin-right: 10px;
		float: left;
	}
	#headerLeft > h1 {
		margin-top: 0px;
	}
	#headerRight {
		float: right;
	}
	#headerRight > div {
		width: 400px;
		height: 300px;
		border: 0px solid lightgray;
	}
	.clearBoth {
		clear: both;
	}
	</style>
</head>

<body>
	<div style="width: 1000px;">
		<div id="header">
			<!-- Header of the report -->
			<div id="headerLeft">
			</div>
			<div id="headerRight">
				<div>
					<canvas id="myCanvas" style="background-color: white;"></canvas>
				</div>
			</div>
			<div className="clearBoth"></div>
		</div>
		<div id="content">
		</div>
	</div>
	<script type="text/babel">
		//////////////////////////////////// lib //////////////////////////////////////
		var groupBy = function(list, key) {
			return list.reduce(function(accumulator, currentValue) {
				(accumulator[currentValue[key]] = accumulator[currentValue[key]] || []).push(currentValue);
				return accumulator;
			}, {});
		};

		var calcDuration = function(/*Date*/ startTime, /*Date*/ endTime) {
			var durationStr = "";

			// Set the unit values in milliseconds.  
			var msecPerMinute = 1000 * 60;  
			var msecPerHour = msecPerMinute * 60;  
			var msecPerDay = msecPerHour * 24;  
			// Get the difference in milliseconds.  
			var interval = endTime.getTime() - startTime.getTime();  

			// Calculate how many days the interval contains. Subtract that  
			// many days from the interval to determine the remainder.  
			var days = Math.floor(interval / msecPerDay );  
			if(days > 0) durationStr = days + "d "
			interval = interval - (days * msecPerDay );  

			// Calculate the hours, minutes, and seconds.  
			var hours = Math.floor(interval / msecPerHour );  
			if(hours > 0) durationStr = durationStr + hours + "h "
			interval = interval - (hours * msecPerHour );  

			var minutes = Math.floor(interval / msecPerMinute );  
			if(minutes > 0) durationStr = durationStr + minutes + "m "
			interval = interval - (minutes * msecPerMinute );  

			var seconds = Math.floor(interval / 1000 );
			if(seconds > 0) durationStr = durationStr + seconds + "s "

			return durationStr;
		};

		var timeOnlyFormatter = new Intl.DateTimeFormat('en-US', {hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: false});
		//////////////////////////////////// end of lib //////////////////////////////////////

		const reportData = [
			{"ID":1,"Level":"INFO","LevelValue":40000,"Message":"TestAppend2: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.","ThreadName":"ParallelWorker#1","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:18.4459503Z","ScreenshotPath":null,"Browser":"FireFox","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend2"},
			{"ID":2,"Level":"INFO","LevelValue":40000,"Message":"TestAppend4: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.","ThreadName":"ParallelWorker#3","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:18.4459503Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend4"},
			{"ID":3,"Level":"INFO","LevelValue":40000,"Message":"TestAppend1: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.","ThreadName":"ParallelWorker#4","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:18.4459503Z","ScreenshotPath":null,"Browser":"IE","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend1"},
			{"ID":4,"Level":"WARN","LevelValue":60000,"Message":"TestAppend3: Warn test","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:18.4459503Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":5,"Level":"FAIL","LevelValue":75000,"Message":"TestAppend2: Fail Skip test","ThreadName":"ParallelWorker#1","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:19.448499Z","ScreenshotPath":"http://opspl.com/wp-content/uploads/2017/01/automation-vs-manual-testing.gif","Browser":"FireFox","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend2"},
			{"ID":6,"Level":"PASS","LevelValue":55000,"Message":"TestAppend4: Fail Skip test","ThreadName":"ParallelWorker#3","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:20.0529907Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend4"},
			{"ID":7,"Level":"FAIL","LevelValue":75000,"Message":"TestAppend1: Fail Skip test","ThreadName":"ParallelWorker#4","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:20.8276893Z","ScreenshotPath":null,"Browser":"IE","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend1"},
			{"ID":8,"Level":"DEBUG","LevelValue":30000,"Message":"TestAppend3: Debug","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:21.0976978Z","ScreenshotPath":"actual path to file here","Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":9,"Level":"DEBUG","LevelValue":30000,"Message":"TestAppend1: Debug","ThreadName":"ParallelWorker#4","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:22.4499116Z","ScreenshotPath":"actual path to file here","Browser":"IE","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend1"},
			{"ID":10,"Level":"INFO","LevelValue":40000,"Message":"2147483647 = OFF","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:23.2758689Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":11,"Level":"INFO","LevelValue":40000,"Message":"-2147483648 = ALL","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:23.8152096Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":12,"Level":"INFO","LevelValue":40000,"Message":"10000 = VERBOSE","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:24.5669992Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":13,"Level":"INFO","LevelValue":40000,"Message":"20000 = FINER","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:25.3537978Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":14,"Level":"INFO","LevelValue":40000,"Message":"20000 = TRACE","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:25.7172875Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":15,"Level":"INFO","LevelValue":40000,"Message":"30000 = FINE","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:26.1175102Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":16,"Level":"INFO","LevelValue":40000,"Message":"30000 = DEBUG","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:26.36323Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":17,"Level":"INFO","LevelValue":40000,"Message":"40000 = INFO","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:26.5563713Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":18,"Level":"INFO","LevelValue":40000,"Message":"50000 = NOTICE","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:27.2031041Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":19,"Level":"INFO","LevelValue":40000,"Message":"10000 = FINEST","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:27.9935328Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":20,"Level":"INFO","LevelValue":40000,"Message":"70000 = ERROR","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:28.5636686Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":21,"Level":"INFO","LevelValue":40000,"Message":"80000 = SEVERE","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:29.3977579Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":22,"Level":"INFO","LevelValue":40000,"Message":"90000 = CRITICAL","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:30.0456469Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":23,"Level":"INFO","LevelValue":40000,"Message":"100000 = ALERT","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:30.2917147Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":24,"Level":"INFO","LevelValue":40000,"Message":"110000 = FATAL","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:30.4607298Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":25,"Level":"INFO","LevelValue":40000,"Message":"120000 = EMERGENCY","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:30.9190129Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":26,"Level":"INFO","LevelValue":40000,"Message":"120000 = log4net:DEBUG","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:31.4127746Z","ScreenshotPath":null,"Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"ID":27,"Level":"INFO","LevelValue":40000,"Message":"60000 = WARN","ThreadName":"ParallelWorker#2","StackTrace":null,"TimeStampUtc":"2018-05-20T23:40:31.6755492Z","ScreenshotPath":"http://opspl.com/wp-content/uploads/2017/01/automation-vs-manual-testing.gif","Browser":"Chrome","FullTestCaseName":"DynamicLog4netReport.Test.DynamicAppenderTestFixture.TestAppend3"},
			{"EndOfReportData":true} // logger will add data into reportData array during tests execution
		];

		//////////////////////////////////// Render Tests Execution Table //////////////////////////////////////

		reportData.splice(-1,1)

		for (var i = 0; i < reportData.length; i++) {
			reportData[i].TimeStampUtc = new Date(reportData[i].TimeStampUtc);
		}

		const reportDataGroups = [];
		const groupsObject = groupBy(reportData, 'FullTestCaseName');

		Object.keys(groupsObject).forEach(function(key, index) {
			var reportDataGroup = groupsObject[key];
			reportDataGroup.FullTestCaseName = reportDataGroup[0].FullTestCaseName;
			reportDataGroup.GetLevel = function() {
				return reportDataGroup
					.reduce((accumulator, currentValue) => currentValue.LevelValue > accumulator.LevelValue ? currentValue : accumulator, reportDataGroup[0])
					.Level;
			};
			reportDataGroup.GetStartTime = function() {
				return reportDataGroup
					.reduce((accumulator, currentValue) => currentValue.TimeStampUtc < accumulator.TimeStampUtc ? currentValue : accumulator, reportDataGroup[0])
					.TimeStampUtc;
			};
			reportDataGroup.GetEndTime = function() {
				return reportDataGroup
					.reduce((accumulator, currentValue) => currentValue.TimeStampUtc > accumulator.TimeStampUtc ? currentValue : accumulator, reportDataGroup[0])
					.TimeStampUtc;
			};
			reportDataGroups.push(reportDataGroup);
		});

		class DetailsRow extends React.Component {
			constructor(props) {
				super(props);
			}
			render() {
				return (
						<tr className={`detailsRow ${this.props.reportDataGroupRow.Level.toLowerCase()}`}>
							<td className='timeCol' title={`[${this.props.reportDataGroupRow.ThreadName}]`}>{timeOnlyFormatter.format(this.props.reportDataGroupRow.TimeStampUtc)}</td>
							<td className='statusCol'><span>{this.props.reportDataGroupRow.Level}</span></td>
							<td className='messageCol'>
								{this.props.reportDataGroupRow.ScreenshotPath != null && (
									<span><a className='screenshot' target='_blank' href={this.props.reportDataGroupRow.ScreenshotPath}><span className='screenshotIcon' title='Open Screenshot'></span></a>&nbsp;</span>
								)}
								{this.props.reportDataGroupRow.Message}
							</td>
						</tr>
				)
			}
		}

		class SummaryRow extends React.Component {
			constructor(props) {
				super(props);
				this.state = {
					expanded: false
				};
			}

			toggleExpanded () {
				this.setState({
					expanded: !this.state.expanded
				})
			}

			render() {
				var level = this.props.reportDataGroup.GetLevel();
				
				return (
					<tbody>
						<tr className={`summaryRow ${level.toLowerCase()}`} onClick={this.toggleExpanded.bind(this)}>
							<td className='summaryStatus'><span>{level}</span></td>
							<td className='summaryTestName'>{this.props.reportDataGroup.FullTestCaseName}</td>
							<td className='summaryStart'>{timeOnlyFormatter.format(this.props.reportDataGroup.GetStartTime())}&nbsp;&nbsp;- </td>
							<td className='summaryEnd'>{timeOnlyFormatter.format(this.props.reportDataGroup.GetEndTime())}</td>
							<td className='summaryDuration' title={`Duration: ${calcDuration(this.props.reportDataGroup.GetStartTime(), this.props.reportDataGroup.GetEndTime())}`}><div style={{width: '52px'}}></div><span className='square'></span><span className='square'></span><span className='square'></span><span className='square'></span></td>
						</tr>
						{ this.state.expanded && (
							<tr className={`summaryDetailsRow ${level.toLowerCase()}`}>
								<td>&nbsp;</td>
								<td colSpan="4">
									<table className='details'>
										<tbody>
											{this.props.reportDataGroup.map((reportDataGroupRow, i) => {
												return (
													<DetailsRow key={reportDataGroupRow.ID} reportDataGroupRow={reportDataGroupRow}/>
												);
											})}
										</tbody>
									</table>
								</td>
							</tr>
						) }
					</tbody>
				)
			}
		}

		class SummaryTable extends React.Component {
			constructor(props) {
				super(props);
			}
			render() {
				return (
					<table className='summary'>
						{this.props.reportDataGroups.map((reportDataGroup, i) => {
							return (
								<SummaryRow key={reportDataGroup.FullTestCaseName} reportDataGroup={reportDataGroup}/>
							);
						})}
					</table>
				)
			}
		}

		ReactDOM.render(
			<SummaryTable reportDataGroups={reportDataGroups}/>,
			document.getElementById('content')
		);

		//////////////////////////////////// Render Header //////////////////////////////////////

		var reportMetaData = {};
		var reportMetaData = {"ReportName":"My Test Execution Report","ReportEnvironment":"PROD","ReportCategory":"Unusual"};

		reportDataGroups.map((reportDataGroup, i) => {
			reportDataGroup.tempBrowser = reportDataGroup[0].Browser;
			reportDataGroup.tempLevel = reportDataGroup.GetLevel();
			reportDataGroup.tempStartTime = reportDataGroup.GetStartTime();
			reportDataGroup.tempEndTime = reportDataGroup.GetEndTime();
		});

		var startTime = reportDataGroups
			.reduce((accumulator, currentValue) => currentValue.tempStartTime < accumulator.tempStartTime ? currentValue : accumulator, reportDataGroups[0])
			.tempStartTime;
		var endTime = reportDataGroups
			.reduce((accumulator, currentValue) => currentValue.tempEndTime > accumulator.tempEndTime ? currentValue : accumulator, reportDataGroups[0])
			.tempEndTime;

		var levelBrowserUnique = {};
		reportDataGroups.map(item => {
			const key = item.tempLevel + ' ' + item.tempBrowser;
			if(levelBrowserUnique[key]) levelBrowserUnique[key].Count = levelBrowserUnique[key].Count + 1;
			else levelBrowserUnique[key] = {Count: 1, Level: item.tempLevel, Browser: item.tempBrowser};
		});

		class PageSummary extends React.Component {
			constructor(props) {
				super(props);
				this.state = {
					allExpanded: false
				};
			}

			toggleAllExpanded () {
				this.setState({
					allExpanded: !this.state.allExpanded
				})
				this.dispatchEvent('toggleAllExpanded')
			}

			render() {
				return (
					<div>
						<h1 id="reportTitle">{this.props.reportMetaData.ReportName}</h1>
						<h4 id="environmentInfo"><label>Environment:</label> <span id="environment">{this.props.reportMetaData.ReportEnvironment}</span></h4>
						<h4 id="testCategory"><label>Category:</label> <span id="category">{this.props.reportMetaData.ReportCategory}</span></h4>
						<h4 id="timeInfo"><label>Start:</label> <span id="startTime">{timeOnlyFormatter.format(startTime)}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label>End:</label> <span id="endTime">{timeOnlyFormatter.format(endTime)}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label>Duration:</label> <span id="duration">{calcDuration(startTime, endTime)}</span></h4>

						<h4 id="passFailInfo">
							{
								Object.keys(levelBrowserUnique).map((key, index) => {
									let level = levelBrowserUnique[key].Level.toLowerCase();
									level = level.charAt(0).toUpperCase() + level.substr(1);
									const count = levelBrowserUnique[key].Count;
									return (
										<span key={key}>
											<div style={{float: 'left', marginRight: '20px'}}>
												<label className={`status${level}`}>{key}:</label> <span className={`status${level}`}>{count}</span>
											</div>
										</span>
									);
								})
							}
						</h4>

						TODO: [<span id="stepNames">
							{
								Object.keys(groupBy(reportData, 'Level')).map(key => {
									return (
										<a key={key} href="javascript:void(0)" style={{marginLeft: '5px', marginRight: '5px'}} className={`status${key.toLowerCase()}`}>{key}</a>
									);
								})
							}
						</span>]<br/><br/>

						[ <a id="expandCollapseAll" href="javascript:void(0)" onClick={this.toggleAllExpanded.bind(this)}>Expand/Collapse All</a> ]
					</div>
				)
			}
		}

		ReactDOM.render(
			<PageSummary reportMetaData={reportMetaData}/>,
			document.getElementById('headerLeft')
		);
	</script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.min.js"></script>
	<script type="text/babel">
		//////////////////////////////////// Pie Charts //////////////////////////////////////
		var levelGroupped = groupBy(reportDataGroups, 'tempLevel');

		const levelCounts = [];
		const levelBgColors = [];
		const levelBorderColors = [];
		const levelHoverBorderColor = [];
		const levelLabels = [];
		Object.keys(levelGroupped).map(key => {
			levelCounts.push(levelGroupped[key].length);
			levelBgColors.push(levelToColor[key.toLowerCase()]);
			levelBorderColors.push('white');
			levelHoverBorderColor.push('white');
			levelLabels.push(key);
		});

		var data = {
			datasets: [{
				data: levelCounts,
				backgroundColor: levelBgColors,
				borderColor: levelBorderColors,
				hoverBorderColor: levelHoverBorderColor,
				label: 'Tests' // for legend
			}],
			labels: levelLabels
		};
		var canvas = document.getElementById("myCanvas");
		var ctx = canvas.getContext("2d");
		$(function () {
			new Chart(ctx, {
				data: data,
				type: "pie",
				options: {
					maintainAspectRatio: false,
					/*
					LOOK INTO http://jsfiddle.net/5gyfykka/
					tooltipTemplate: "<%= value %>",
					onAnimationComplete: function () {
						this.showTooltip(this.segments, true);
					},
					tooltipEvents: [],*/
					showTooltips: true,
					elements: {
						arc: {
							borderColor: "#000000"
						}
					}
				}
			});
		});
	</script>
</body>
</html>